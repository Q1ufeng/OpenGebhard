### 概述

使用7个互相存在关联的数据库，模拟一个**图书馆**的工作流程

数据库分别存放：库存信息，读者信息，拟借阅信息，成功借阅信息，归还信息，读者藏书信息，采购清单。

### 具体内容

#### 1.库存信息

* id : 书籍id，唯一，从1开始排序

* book_name : 书籍名称，唯一，在书名集中

* book_num : 书籍数量，起始在1-100之间随机生成

* price : 书籍标价，起始在20-100之间随机生成

#### 2.读者信息

* id : 读者id，唯一，从1开始排序

* reader_name : 读者名称，不唯一，在人名集中

* address : 读者地址，不唯一，由**随机生成的街道名+随机生成的门牌号组合**生成

* deposit : 押金，不唯一，在**50-200**的整数随机生成

* cost : 借阅占用押金，初始为0

#### 3.拟借阅信息

* id :  清单id，唯一，从1开始排序

* reader_id : 拟借阅读者id

* book_id : 拟借阅书籍id

* borrow_num : 拟借阅本书籍数

* dealt : 是否已处理

#### 4.成功借阅信息

* id :  借阅id，唯一，从1开始排序

* reader_id : 借阅读者id

* book_id : 借阅书籍id

* borrow_num : 借阅本书籍数

#### 5.归还信息

* id ：归还id，唯一，从1开始排序

* reader_id : 归还读者id

* book_id : 归还书籍id

* return_num : 归还本书籍数

#### 6.读者藏书信息

* id : 读者id，唯一

* book_id : 书籍id

**(id,book_id)唯一**

* book_num : 书籍数量

#### 7.采购清单

* id : 清单id，不唯一

* book_id : 书籍id

* book_num : 书籍数量

### 工作流程

假设这是一个管理图书馆系统的数据库。

* 首先，生成两个集合，**人名集**和**书名集**。需要取人名和书名的时候都从中随机抽取。

    人名集生成规则：将**姓氏集**和**名集**一一组合

    书名集生成规则：随机生成不重复的长度为**3-30**的随机字母数字串

* 其次，根据当次实验的数据集大小生成随机的初始图书库和初始用户库

* 然后便可以开始进行常规工作流程

    * 借书：首先一名**随机**居民随机抽取**1-5**本书放入拟借阅清单；其次依次检查书库中是否有足够藏书/居民剩余押金是否足够，
    
    有则通过借阅生成借阅信息并更新读者藏书，读者信息和库存信息；无则驳回请求（标记为已处理，无其他效果）

    * 还书：随机的**有藏书居民**会归还其随机藏书，生成还书信息，更新读者，读者藏书和库存信息

    * 采购：生成随机的采购清单，更新库存信息

* 这些操作的频率和各参数会根据不同次实验做相应调整